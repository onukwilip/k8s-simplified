apiVersion: v1
kind: Service
metadata:
    name: "{{ .Values.name }}-service"
    labels:
        app: {{ .Values.name }}
    namespace: {{ .Values.environment }}
spec:
    selector:
        app: {{ .Values.name }}
    type: "ClusterIP"
    ports:
        - protocol: {{ default "TCP" .Values.protocol }}
          port: {{ .Values.port }}
          targetPort: {{ .Values.port }}
